---
date: 2024-02-16 00:01:00
layout: post
title: "[스프링부트 시리즈8] 리포지토리로 DB관리하기"
subtitle: 데이터 관리용 JPA 리포지토리 만들기.
description: 
image: 
  'assets/img/uploads/2024/feb/2024-02-02-springboot-structure/title.jpg'
optimized_image:    
  'assets/img/uploads/2024/feb/2024-02-02-springboot-structure/p_title.jpg'
category: springboot
tags:  [ intelliJ, springboot, devlog, repository ]
author: sammy
paginate: true
---
# 리포지토리로 DB 관리하기
*****
엔티티만으로는 테이블의 데이터를 조회나 저장, 수정을 할 수 없다.
데이터를 관리하려면 데이터베이스와 연동되는 JPA 리포지토리가 반드시 필요하다.

## 리포지토리 생성하기
*****
리포지토리는 엔티티가 할 수 없는 생성된 데이터베이스 테이블 데이터들을 수정, 저장, 조회, 삭제 할 수 있게 해주는 인터페이스다.
리포지토리는 테이블에 접근해, 데이터를 관리하는 메서드들을 제공한다.
1) 리포지토리를 만들려면 `com.mysite.sbb`패키지에서 New -> Interface를 클릭해 `QuestionRespository` 아래처럼 인터페이스를 생성하자.
  ```java
  package com.mysite.sbb;
  import org.springframework.data.jpa.repository.JpaRepository;
  public interface QuestionRepository extends JpaRepository<Question, Integer>{

  }
  ```

생성한 `QuestionRepository` 인터페이스를 리포지토리로 만들려면 `JpaRepository` 인터페이스를 상속한다. `JpaRepository`는 JPA가 제공하는 인터페이스 중 하나로서 CRUD 작업을 처리하는 메서드들을 내장하여, DB 관리작업을 수월하게 해준다. `JpaRepository<Question, Integer>`는 Question 엔티티로 리포지토리를 생성한다는 의미이다.
Question 엔티티의 기본키가 Integer임을 추가로 지정해야 한다.
> CRUD는 Create,Read,Update,Delete의 약자로 데이터처리의 기본기능을 말한다.

2) AnswerRepository 인터페이스도 생성한다.
  ```java
  package com.mysite.sbb;
  import org.springframework.data.jpa.repository.JpaRepository;
  public interface AnswerRepository extends JpaRepository<Answer, Integer>{

  }
  ```
이제 QuestionRepository, AnswerRepository를 이용해 question, answer 테이블의 데이터를 CRUD할 수 있게 되었다.

## JUnit 설치하기
*****
리포지토리를 써서 데이터를 저장하려면 질문을 등록하는 화면과 사용자가 입력한 질문 관련 정보를 저장하는 컨트롤러, 서비스 파일등이 필요하다.
하지만 JUnit을 쓴다면 이런 프로세스가 필요하지 않고, 리포지토리만 개별 실행하여 테스트 할 수 있다. 앞서 작성한 리포지토리가 정상 작동하는지 직접 테스트하기 위해 먼저 JUnit을 설치하자.

> * JUnit은 코드를 작성하고 작성한 코드를 테스트할 때 사용하는 자바 테스트프레임워크다. 소프트웨어 개발 시 테스트용으로 자주 사용한다.

JUnit을 사용하려면 `build.gralde.kts`파일에 아래와 같이 추가한다.
```
(... 생략 ...)

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-web'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
    developmentOnly 'org.springframework.boot:spring-boot-devtools' 
    compileOnly 'org.projectlombok:lombok' 
    annotationProcessor 'org.projectlombok:lombok' 
    runtimeOnly 'com.h2database:h2' 
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa' 
    testImplementation 'org.junit.jupiter:junit-jupiter' 
    testRuntimeOnly 'org.junit.platform:junit-platform-launcher'
}

(... 생략 ...)
```